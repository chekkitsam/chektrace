<div class="my-8 w-100 sm:px-16 md:px-16 px-4">
  <div *ngIf="currentStage == 1">

    <div class="flex w-full ">

      <p class=" flex-1 text-2xl text-blueGray-700 font-bold ">Campaigns</p>

      <div class="w-full sm:ml-3 md:ml-2 lg:ml-2 flex-1 text-right">


        <button
          class="border border-blueGray-700 text-sm py-2 m-3 px-2 text-white transition-colors duration-150 bg-blueGray-800 rounded-lg focus:shadow-outline hover:bg-blueGray-800 font-bold"
          (click)="currentStage = 2">Start New
          Campaign</button>

      </div>

    </div>

    <div class="bg-white p-8 rounded-lg ">

      <div class="flex w-full ">

        <p class=" flex-1 text-md font-semibold text-blueGray-700 ">Active Campaigns Table</p>

        <div class="w-full sm:ml-3 md:ml-2 lg:ml-2 flex-1 text-right">


          <!-- <button
            class="border border-blueGray-500 py-1  px-2 shadow text-blueGray-700 transition-colors duration-150 bg-white rounded-lg focus:shadow-outline hover:bg-indigo-800 font-bold"><i
              class="fa">&#xf1de;</i> &nbsp;Filter</button> -->
              <input placeholder="Search Campaigns" [(ngModel)]="term"  class=" searchTerm justify-self-end flex-1 bg-white text-blueGray-700 border-2 border-blueGray-600 active:bg-blueGray-600 text-sm font-bold px-6 py-3 rounded-md hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"  />


        </div>

      </div>
      <div class="overflow-x-auto  w-full h-full">
        <!-- TABLE HEADER    -->
        <div class="flex sm:bg-white justify-between px-4 p-4 my-8">
          <div class="w-40 flex-shrink-0 text-center">

            <p class="font-bold">&nbsp;&nbsp; Date Created
            </p>
          </div>
          <div class="w-40 flex-shrink-0 text-center">

            <p class="font-bold">&nbsp;&nbsp; Campaign Type
            </p>
          </div>
          <div class="w-40 flex-shrink-0 text-center font-bold">
            Title
          </div>
          <div class="w-40 flex-shrink-0 text-center font-bold">
            Status
          </div>

          <!-- <div class="w-40 flex-shrink-0 text-center font-bold">
            Action
          </div> -->
        </div>

        <!-- table content starts-->
        <div class="flex table-bg mt-2 rounded-2xl justify-between px-4 py-4"
          *ngFor="let campaign of allCampaigns| filter: term | paginate: { itemsPerPage: 10, currentPage: p };">
          <div class="w-40 flex-shrink-0 text-center ">

            <p class="text-xs text-blueGray-700"> &nbsp;&nbsp; {{campaign.created_at | date: longDate}}</p>
          </div>
          <div class="w-40 flex-shrink-0 text-center text-xs text-blueGray-700 ">
            {{campaign.campaign_type}}
          </div>
          <div class="w-40 flex-shrink-0 text-center text-xs text-blueGray-700 ">
            {{campaign.title}}
          </div>
          <div class="w-40 flex-shrink-0 text-center   ">

            <span class="bg-blueGray-800 rounded-md px-4 py-2 text-xs text-white"> {{campaign.status}} </span>
          </div>
          <!-- <div class="w-40 flex-shrink-0 text-center text-blueGray-700 font-semibold text-xs cursor-pointer " (click)="viewCampaign(campaign.id)" >
            VIEW
          </div> -->
        </div>
      </div>

      <div class="w-100 text-center p-3 mt-5 text-sm ">
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>

    </div>
    <br><br>
    <div class="bg-white p-4 rounded-lg">
      <div class="flex w-full md:px-16 sm:px-16 px-4">

        <p class=" flex-1 text-lg text-blueGray-700 text-sm font-semibold "> Campaigns Outcome</p>

        <div class="w-full sm:ml-3 md:ml-2 lg:ml-2 flex-1 text-right">
          <button
            class=" py-2 m-3 px-8 text-blueGray-700 transition-colors duration-150 bg-blueGray-300 rounded-lg focus:shadow-outline hover:bg-indigo-800 font-bold">Solar
            Panel </button>

          <!-- <button
            class="border border-blueGray-700 py-2 m-3 px-8 text-blueGray-700 transition-colors duration-150 bg-white rounded-lg focus:shadow-outline hover:bg-indigo-800 font-bold"><i
              class="fa">&#xf1de;</i> &nbsp;Filter</button> -->

        </div>
      </div>
      <div class="">
        <canvas id="myChart"></canvas>
      </div>
    </div>

  </div>

  <div *ngIf="currentStage == 2" class="h-screen">
    <p class="font-bold text-md my-8 cursor-pointer">
      <span (click)="currentStage = 1">
        <i class="fa">&#xf060;</i> &nbsp; &nbsp;
        Back
      </span>
    </p>
    <h1 class="font-bold text-2xl mb-5">Start a new Campaign</h1>

    <p class="text-blueGray-800 font-bold mb-5">Step 1: Select Campaign Type</p>

    <div class="flex justify-between ">
      <div class="bg-blueGray-800 hover:bg-blueGray-300 rounded-lg shadow-lg p-5 flex-1 m-5 ">
        <p class="rounded-full p-5 mr-8 ">
          <img src="../../../../../assets/img/airtime-reward.png" width="80" alt="" srcset="">
        </p>
        <p class="text-blueGray-800 font-bold mb-5 text-white text-2xl my-5">Airtime Campaign</p>
        <p class="text-right underline-offset-8">
          <small class="text-blueGray-500 text-green-400 text-right ">What is this ?</small>
        </p>
        <div class="text-blueGray-800 bg-green-400 rounded-lg text-center font-bold py-3 px-8 mt-5 cursor-pointer"
          (click)="selectAirtime() ">
          Select
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-lg p-5 flex-1 m-5">
        <p class="rounded-full p-5 mr-8 ">
          <img src="../../../../../assets/img/raffle-reward.png" width="80" alt="" srcset="">
        </p>
        <p class="text-blueGray-800 font-bold mb-5 text-2xl my-5">Raffle Draw</p>
        <div class="text-right">
          <small class="text-blueGray-500">What is this ?</small>
        </div>


        <div class="text-blueGray-800 bg-blueGray-200 rounded-lg text-center font-bold py-3 px-8 mt-5 cursor-pointer "
          (click)="campaignType = 'Raffle' ">
          Select
        </div>
      </div>
      <div class="flex-1"></div>
      <!-- <div class="bg-white rounded-lg shadow-lg p-5 flex-1 m-5" >
        <p class="text-blueGray-800 font-bold mb-5" >Voucher Campaign</p>

        <p class="text-green-200 text-center" >What is this ?</p>


        <div class="text-blueGray-800 bg-blueGray-200 rounded-lg text-center font-bold py-3 px-8 mt-5" (click)="campaignType = 'Voucher' "  >
          Select
        </div>
      </div> -->
    </div>

  </div>

  <div *ngIf="currentStage == 4 " class="h-screen">


    <div class="" *ngIf="!showDetail">
      <p class="font-bold text-md my-8">
        <span (click)="currentStage = 3">
          <i class="fa">&#xf060;</i> &nbsp; &nbsp;
          Go Back
        </span>

      </p>
      <p class="text-md text-bold text-blueGray-800 ">Define Campaign Informations</p>
      <div class="flex justify-between">
        <div class="flex-1">
          <div class="my-8 ">
            <div class="font-bold">Campaign Name</div>
            <input class="border-3 border border-blueGray-500 p-3 rounded-lg bg-white w-full"
              [(ngModel)]="campaign_name" />
          </div>
          <div class="my-8">
            <div class="font-bold">Campaign Decsription</div>
            <textarea class="border-3 border border-blueGray-500 p-3 rounded-lg bg-white w-full "
              [(ngModel)]="campaign_description"></textarea>
          </div>
          <button class="bg-blueGray-800 text-white font-bold rounded mt-8 px-10 py-2 text-center"
            (click)="createCampaign()">Submit</button>
        </div>
        <div class="flex-1">

        </div>
      </div>
    </div>


    <div *ngIf="showDetail">
      <div class="bg-white rounded p-4">
        <p class="text-2xl text-bold text-blueGray-800 ">Campaign Information</p>
        <div class="flex p-8">
          <div class="w-30">
            <img src="../../../../../assets/img/airtime-reward.png" width="100" alt="" srcset="">
          </div>
          <div class="w-70 pl-4">
            <p>Campaign Name</p>
            <p class="font-bold text-lg">{{campaignTitle}} </p>
            <p>Campaign Description</p>
            <p class="font-bold text-lg">{{campaignDescription}}
            </p>
          </div>
        </div>
      </div>
      <button class="bg-blueGray-800 text-white font-bold rounded mt-8 px-10 py-4 text-center"
        (click)="currentStage = 3">Continue</button>
    </div>

  </div>



  <div *ngIf="currentStage == 3" class="h-auto">
    <p class="font-bold text-md my-8">
      <span (click)="currentStage = 2">
        <i class="fa">&#xf060;</i> &nbsp; &nbsp;
        Go Back
      </span>

    </p>
    <div class="bg-white rounded p-8">
      <div class="flex">
        <div class="flex-2">
          <h1 class="font-bold text-2xl mb-5"> {{campaignTitle}} Setup </h1>
        </div>
        <div class="flex-1 text-right">
          <button *ngIf="!proceedToPay" class="bg-blueGray-800 text-white font-bold rounded-lg px-8 py-3 "
            (click)="initPayment()">
            Continue <span *ngIf="loading">
              <img class="inline-flex "
                src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />

            </span>
          </button>

          <angular-paystack *ngIf="proceedToPay " [email]="'dh@gmail.com'"
            [amount]="this.airtime_value * this.airtime_units * 100" [ref]="paymentRef" [channels]="['bank', 'card']"
            [class]="'bg-blueGray-800 text-white font-bold rounded-lg px-8 py-3'" (onClose)="paymentCancel()"
            (callback)="paymentDone($event)">
            Pay &#x20A6;{{this.airtime_value * this.airtime_units}}
          </angular-paystack>




        </div>
      </div>


      <p class="text-blueGray-800 font-bold text-lg mb-5">Step 2: Customise Campaign </p>

      <div class="md:flex justify-between">
        <div class="basis-1/2">
          <div class="my-3">
            <p>How much is the airtime unit to be generated ?</p>
            <input class="p-3 border-blueGray-500 border-2 rounded-lg w-full " [(ngModel)]="airtime_value"
              name="airtime_value">
          </div>
          <div class="my-3">
            <p>How many winners are going to win this airtime ?</p>
            <input class="p-3 border-blueGray-500 border-2 rounded-lg w-full" [(ngModel)]="airtime_units"
              name="airtime_units">
          </div>

          <!-- <div class=" rounded p-2 text-blueGray-800 text-sm font-bold cursor-pointer" (click)="addNewAirtime()" >
            <i class='fas'>&#xf067;</i>&nbsp; Add New
        </div> -->
        </div>
        <div class="">
          <div class="p-8 border-2 border-blueGray-500 text-center rounded-lg cursor-pointer"
            (click)=" showPaystackModal = !showPaystackModal">
            <p class="text-blueGray-800 font-bold text-md">Price corresponds with your input</p>
            <p class="text-3xl text-blueGray-300 font-bold ">NGN {{airtime_value * airtime_units }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="bg-blueGray-100 rounded-lg p-5 mt-5" *ngIf="rewards.length" >
      <div class="flex justify-between bg-blueGray-300 rounded-2xl py-3 ">
        <div class="flex-1 text-center text-lg font-bold text-blueGray-800">S/N</div>
        <div class="flex-1 text-center text-lg font-bold text-blueGray-800 ">Airtime Value</div>
        <div class="flex-1 text-center text-lg font-bold text-blueGray-800 ">Airtime Quantity</div>
        <div class="flex-1 text-center text-lg font-bold text-blueGray-800 ">Action </div>
      </div>
      <hr>
      <div class="flex justify-between bg-blueGray-300 rounded-2xl py-3 mt-3 " *ngFor="let item of rewards; let i = index" >
        <div class="flex-1 text-center text-lg font-bold text-blueGray-800"> {{i + 1}} </div>
        <div class="flex-1 text-center text-lg font-bold text-blueGray-800 ">{{item.reward_value}}</div>
        <div class="flex-1 text-center text-lg font-bold text-blueGray-800 ">{{item.reward_quant}}</div>
        <div class="flex-1 text-center text-lg font-bold text-red-500 cursor-pointer " (click)="removeReward(item.reward_value)" >Remove</div>
      </div>

      <br><br>
    <div class="w-100 text-center">
        <button
        (click)="addAirtimeReward()"
            class="bg-blueGray-700  text-white active:bg-blueGray-700 text-lg font-bold px-12 py-3 rounded-md hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150">


            <span *ngIf="!loading">
              Submit
            </span>

            <span *ngIf="loading">
              <img
                class="inline-flex"
                src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
              />
            </span>
        </button>

    </div>
    </div> -->


    <div *ngIf="showPaystackModal"
      class="bg-blueGray-600 bg-opacity-50 h-screen w-screen absolute inset-0 flex justify-center item-center"
      (click)="closeModal()">
      <div
        class="overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex">
        <div class="relative w-auto my-6 mx-auto max-w-6xl modal-body">
          <!--content-->
          <div
            class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none modal-body">
            <!--header-->
            <!-- <div class="flex items-start justify-between p-5  rounded-t">

                    <button
                        class="p-4 rounded-2xl ml-auto bg-blueGray-700 border-0 text-white float-right text-3xl leading-none font-semibold outline-none focus:outline-none"
                        (click)="closeModal()">
                        <span
                            class=" text-white  h-6 w-6 text-2xl block outline-none focus:outline-none">
                            <i style="font-size:24px; " class="fa">&#xf00d;</i>
                        </span>
                    </button>
                </div> -->
            <!--body-->
            <div class="relative p-6 w-100 flex-auto">
              <div class="text-center m-5 ">
                <p class="text-3xl text-blueGray-800 font-bold">NGN 1000.00</p>
                <div class="my-3">
                  <p>Card Number</p>
                  <input class="p-3 border-blueGray-500 border-2 rounded-lg w-full">
                </div>
                <div class="flex">
                  <div class="basis-1/2">
                    <div class="my-3 mr-2">
                      <p>Valid Till</p>
                      <input class="p-3 border-blueGray-500 border-2 rounded-lg w-full">
                    </div>
                  </div>
                  <div class="basis-1/2 ">
                    <div class="my-3 ml-2">
                      <p>CVV</p>
                      <input class="p-3 border-blueGray-500 border-2 rounded-lg w-full">
                    </div>
                  </div>
                </div>

                <button class="bg-blueGray-800 text-white font-bold rounded-lg px-8 py-3 ">Make Payment</button>


              </div>


            </div>

          </div>
        </div>
      </div>

    </div>

  </div>

  <div *ngIf="currentStage == 5" class="h-screen">
    <p class="font-bold text-md my-8">
      <span (click)="currentStage == 3">
        <i class="fa">&#xf060;</i> &nbsp; &nbsp;
        Go Back
      </span>
    </p>
    <div class="flex w-full px-16">

      <p class=" flex-1 text-lg text-blueGray-700 ">Active Campaigns Table</p>

      <div class="w-full sm:ml-3 md:ml-2 lg:ml-2 flex-1 text-right">


        <button
          class="border border-blueGray-700 py-4 m-3 px-8 text-blueGray-700 transition-colors duration-150 bg-white rounded-lg focus:shadow-outline hover:bg-indigo-800 font-bold"><i
            class="fa">&#xf1de;</i> &nbsp;Filter</button>

      </div>

    </div>

  </div>

  <div *ngIf="currentStage == 6" class="h-screen">
    <p class=" flex-1 text-lg text-blueGray-700 my-5">Attach Survey to Campaign</p>
    <app-attach-survey (assignRewards)="assignReward($event)" (emitSurveyAddedEvent)="getSurveyId($event)">
    </app-attach-survey>
  </div>

  <div *ngIf="showModal"
  class="bg-blueGray-600 bg-opacity-25 h-screen w-screen absolute inset-0 flex justify-center item-center" >
  <div
      class="overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex">
      <div class="relative w-auto my-6 mx-auto max-w-6xl modal-body">
          <!--content-->
          <div
              class="border-0  relative flex flex-col w-full bg-white outline-none focus:outline-none modal-body">
              <!--header-->
              <div class="flex items-start justify-between p-5  rounded-t">

                  <button
                      class="p-2 rounded-2xl ml-auto bg-blueGray-700 border-0 text-white float-right  leading-none font-semibold outline-none focus:outline-none"
                      (click)="showModal = !showModal">
                      <span
                          class=" text-white  h-6 w-6 text-md block outline-none focus:outline-none">
                          <i style="font-size:24px; " class="fa">&#xf00d;</i>
                      </span>
                  </button>
              </div>
              <!--body-->

          </div>
      </div>
  </div>
</div>
